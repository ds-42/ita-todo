2024-03-23 00:19:19.180 +03:00 [INF] User profile is available. Using 'C:\Users\Aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-23 00:19:19.349 +03:00 [INF] Now listening on: https://localhost:7066
2024-03-23 00:19:19.350 +03:00 [INF] Now listening on: http://localhost:5198
2024-03-23 00:19:19.351 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-23 00:19:19.351 +03:00 [INF] Hosting environment: Development
2024-03-23 00:19:19.351 +03:00 [INF] Content root path: D:\Users\Aleks\C#\ItAcademy\todo\Auth.Api
2024-03-23 00:19:33.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger - null null
2024-03-23 00:19:33.274 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger - 301 0 null 132.1981ms
2024-03-23 00:19:33.279 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/index.html - null null
2024-03-23 00:19:33.348 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/index.html - 200 null text/html;charset=utf-8 69.0981ms
2024-03-23 00:19:33.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/swagger-ui-bundle.js - null null
2024-03-23 00:19:33.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/swagger-ui.css - null null
2024-03-23 00:19:33.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/swagger-ui-standalone-preset.js - null null
2024-03-23 00:19:33.350 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/_framework/aspnetcore-browser-refresh.js - null null
2024-03-23 00:19:33.350 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/_vs/browserLink - null null
2024-03-23 00:19:33.356 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 6.6114ms
2024-03-23 00:19:33.432 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-03-23 00:19:33.432 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-03-23 00:19:33.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 84.9144ms
2024-03-23 00:19:33.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/swagger-ui.css - 200 143943 text/css 85.0236ms
2024-03-23 00:19:33.434 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-03-23 00:19:33.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 86.2785ms
2024-03-23 00:19:33.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.1203ms
2024-03-23 00:19:33.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/v1/swagger.json - null null
2024-03-23 00:19:33.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/favicon-32x32.png - null null
2024-03-23 00:19:33.592 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-03-23 00:19:33.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/favicon-32x32.png - 200 628 image/png 1.0958ms
2024-03-23 00:19:33.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 60.8014ms
2024-03-23 00:19:53.459 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7066/auth/CreateJwtToken - application/json 47
2024-03-23 00:19:54.124 +03:00 [INF] Executing endpoint 'Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api)'
2024-03-23 00:19:54.142 +03:00 [INF] Route matched with {action = "CreateJwtToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateJwtToken(Users.Services.Dto.AuthDto, System.Threading.CancellationToken) on controller Auth.Api.Controllers.AuthController (Auth.Api).
2024-03-23 00:19:55.634 +03:00 [ERR] An error occurred using the connection to database 'test_ita' on server 'localhost\sqlexpress'.
2024-03-23 00:19:55.654 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Common.Repositiories.ApplicationDbContext'.
System.Globalization.CultureNotFoundException: Only the invariant culture is supported in globalization-invariant mode. See https://aka.ms/GlobalizationInvariantMode for more information. (Parameter 'name')
en-us is an invalid culture identifier.
   at System.Globalization.CultureInfo.GetCultureInfo(String name)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Globalization.CultureNotFoundException: Only the invariant culture is supported in globalization-invariant mode. See https://aka.ms/GlobalizationInvariantMode for more information. (Parameter 'name')
en-us is an invalid culture identifier.
   at System.Globalization.CultureInfo.GetCultureInfo(String name)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-03-23 00:19:55.741 +03:00 [INF] Executed action Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api) in 1596.6629ms
2024-03-23 00:19:55.741 +03:00 [INF] Executed endpoint 'Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api)'
2024-03-23 00:19:55.786 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7066/auth/CreateJwtToken - 500 null application/json 2326.8657ms
2024-03-23 00:21:57.123 +03:00 [INF] User profile is available. Using 'C:\Users\Aleks\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-03-23 00:21:57.276 +03:00 [INF] Now listening on: https://localhost:7066
2024-03-23 00:21:57.276 +03:00 [INF] Now listening on: http://localhost:5198
2024-03-23 00:21:57.277 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-23 00:21:57.277 +03:00 [INF] Hosting environment: Development
2024-03-23 00:21:57.277 +03:00 [INF] Content root path: D:\Users\Aleks\C#\ItAcademy\todo\Auth.Api
2024-03-23 00:22:09.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/index.html - null null
2024-03-23 00:22:10.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/index.html - 200 null text/html;charset=utf-8 151.0742ms
2024-03-23 00:22:10.059 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/_vs/browserLink - null null
2024-03-23 00:22:10.059 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/_framework/aspnetcore-browser-refresh.js - null null
2024-03-23 00:22:10.063 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/_framework/aspnetcore-browser-refresh.js - 200 13752 application/javascript; charset=utf-8 3.873ms
2024-03-23 00:22:10.086 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.435ms
2024-03-23 00:22:10.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7066/swagger/v1/swagger.json - null null
2024-03-23 00:22:10.310 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7066/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.4134ms
2024-03-23 00:22:20.162 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7066/auth/CreateJwtToken - application/json 47
2024-03-23 00:22:20.208 +03:00 [INF] Executing endpoint 'Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api)'
2024-03-23 00:22:20.226 +03:00 [INF] Route matched with {action = "CreateJwtToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateJwtToken(Users.Services.Dto.AuthDto, System.Threading.CancellationToken) on controller Auth.Api.Controllers.AuthController (Auth.Api).
2024-03-23 00:22:21.590 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__Trim_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Login], [t].[Password], [t].[RoleId], [t0].[ApplicationUserId], [t0].[ApplicationUserRoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(2) [a].[Id], [a].[Login], [a].[Password], [a].[RoleId]
    FROM [ApplicationUsers] AS [a]
    WHERE [a].[Login] = @__Trim_0
) AS [t]
LEFT JOIN (
    SELECT [a0].[ApplicationUserId], [a0].[ApplicationUserRoleId], [a1].[Id], [a1].[Name]
    FROM [ApplicationUserApplicationRole] AS [a0]
    INNER JOIN [ApplicationUserRoles] AS [a1] ON [a0].[ApplicationUserRoleId] = [a1].[Id]
) AS [t0] ON [t].[Id] = [t0].[ApplicationUserId]
ORDER BY [t].[Id], [t0].[ApplicationUserId], [t0].[ApplicationUserRoleId]
2024-03-23 00:22:21.813 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([ApplicationUserId])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-03-23 00:22:21.835 +03:00 [INF] Executing OkObjectResult, writing value of type 'Users.Services.Dto.JwtTokenDto'.
2024-03-23 00:22:21.843 +03:00 [INF] Executed action Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api) in 1614.7584ms
2024-03-23 00:22:21.844 +03:00 [INF] Executed endpoint 'Auth.Api.Controllers.AuthController.CreateJwtToken (Auth.Api)'
2024-03-23 00:22:21.850 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7066/auth/CreateJwtToken - 200 null application/json; charset=utf-8 1687.7864ms
